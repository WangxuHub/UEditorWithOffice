<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <title></title>

    <script src="UEditor/third-party/jquery-1.10.2.js"></script>
    <script src="Scripts/xss.js"></script>
	<meta charset="utf-8" />
</head>
<body>
    <textarea id="content" style="width:500px;height:200px;"></textarea>
    <button id="btnCheck">btn</button>
    <textarea id="content2" style="width:500px;height:200px;"></textarea>
    <p>213123</p>
    <p>asdasd</p>

    <script asdasd>
        alert(123)

    </script >
    <script>

        $("#content").val("<a style='color:red;' onclick='asdasd' Href='/asdasd'>zxvxzv</a><a href='http://asdasd'>asdsad</a><p style='asdfs'>111</p><p>asdfsadfsadfas</p><scrip" + "t>" + "alert('adasd')</sc" + "ript>");


        var opts = {};
        
        opts.whiteList = {
            a:      ['target', 'href', 'title','style'],
            abbr:   ['title','style'],
            address: ['style'],
            area:   ['shape', 'coords', 'href', 'alt','style'],
            article: ['style'],
            aside:  ['style'],
            audio:  ['autoplay', 'controls', 'loop', 'preload', 'src','style'],
            b:      ['style'],
            bdi:    ['dir','style'],
            bdo:    ['dir','style'],
            big:    ['style'],
            blockquote: ['cite','style'],
            br:     ['style'],
            caption: ['style'],
            center: ['style'],
            cite:   ['style'],
            code:   ['style'],
            col:    ['align', 'valign', 'span', 'width','style'],
            colgroup: ['align', 'valign', 'span', 'width','style'],
            dd:     ['style'],
            del:    ['datetime','style'],
            details: ['open','style'],
            div:    ['style'],
            dl:     ['style'],
            dt:     ['style'],
            em:     ['style'],
            font:   ['color', 'size', 'face','style'],
            footer: ['style'],
            h1:     ['style'],
            h2:     ['style'],
            h3:     ['style'],
            h4:     ['style'],
            h5:     ['style'],
            h6:     ['style'],
            header: ['style'],
            hr:     ['style'],
            i:      ['style'],
            img:    ['src', 'alt', 'title', 'width', 'height','style'],
            ins:    ['datetime','style'],
            li:     ['style'],
            mark:   ['style'],
            nav:    ['style'],
            ol:     ['style'],
            p:      ['style'],
            pre:    ['style'],
            s:      ['style'],
            section:['style'],
            small:  ['style'],
            span:   ['style'],
            sub:    ['style'],
            sup:    ['style'],
            strong: ['style'],
            table:  ['width', 'border', 'align', 'valign','style'],
            tbody:  ['align', 'valign','style'],
            td:     ['width', 'rowspan', 'colspan', 'align', 'valign','style'],
            tfoot:  ['align', 'valign','style'],
            th:     ['width', 'rowspan', 'colspan', 'align', 'valign','style'],
            thead:  ['align', 'valign','style'],
            tr:     ['rowspan', 'align', 'valign','style'],
            tt:     ['style'],
            u:      ['style'],
            ul:     ['style'],
            video:  ['autoplay', 'controls', 'loop', 'preload', 'src', 'height', 'width']
        };

       
        //opts.onIgnoreTag = function (tag, html, options) {
        //    // do nothing
        //    debugger;
        //}

        opts.onIgnoreTagAttr = function (tag, name, value) {
            // return "";
            debugger;
        }

        $("#btnCheck").click(function () {
            var val = $("#content").val();

            val = val.replace(/<script[^>]*?>[\s\S]*?<\/script[^>]*?>/ig, '');
            var obj = filterXSS(val, opts);

            $("#content2").val(obj);
        });

    </script>
</body>
</html>
